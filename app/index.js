import React, {Component} from 'react';
import thunkMiddleware from 'redux-thunk'
import {createLogger} from 'redux-logger'
import apiMiddleWare from './middleware/api'
import {createStore, applyMiddleware} from 'redux'
import rootReducer from './reducers'
import {addNavigationHelpers} from "react-navigation";
import {connect, Provider} from "react-redux";
import AppNavigator from "./config/routes";
import Player from "./components/player"
import VideoPlayer from "./components/videoPlayer"
import {StatusBar, View} from "react-native";

import arc4 from './lib/arc4'
console.log((new arc4('Lyr1cjust4nct')).decodeString("BF24AA05A1C1BB9E3EBAD70300EE6DE8636D14D80CBD17D8A30CCBFE57582D9688EE6CD0AC298AAF415BFBD7EF53E56F8C119133BEFE61F8D5B0E95523FF5EC6C51E6915C90BD98A6078D213E7B2EC0EA53EE16A4DBFED77972B89D6A271CFC1F3EC0058DB3888A6301B41315B6398F9A6B35334C729FF9F2F5756B8E573D11F45CFA7D74C4886E1CD0E2DC31028557E448AD60E2FF967292DE0883AC2FD218347C60D13A6B3565C0B5F7CE5503D3A394E8C12B5EC92199DB4CDB3C3A759BCDA9B56E373FD5529876A6FA8FCF16EEAAA8A3064A292A460E307CB26B81BC5A3A61E6321D621112DCA093A8B206BC0448985161547FD1F91A0D627352490B2221F5B8839CF9FCD88DED8A529562F2EF83418F91F1FC36231A69E42F5D4D37C577A4361FC988AB20C6BEC82AC7C0A5DFCE5AA5835DD625892C34910511B7BDA6B432E42149F3225E4AD41F7A2E703ED2EB2D4FCC744C169E8C958D091EE3ABF74C0C68F2B07146B875DAF5A8E96756E9FE2329E9088294DE3DD52FA4C7BD22F9E6CE91DD524BF1C53A3487DE6A4E78CC0BB901F98951C29B71780E161366302359E74DE6D5B7DF554C7E6B49FC2FDADE35EED804E4DD7628987775739CB2FF3E9248382C03B3A9FE832FB9E3CBE15C1C71CFFD8983DC9699428CDDCB93693A4075070697CFD01FDB7D105FDA796D5C93C5D39171272A62DCC4442BB84FB658896AE5D5FAF2AFC5669BD4100FAC7E9D59EC84F61C348493B68FBA09187415887508CF316A3478C4CD8A425053C5E76FE6796E0FDCE1ABBF1560EB34590D2FC59B5D3C69553A847488D929C70FC1E7E4651EE26D47B0E8CBBCDAC75B2CB1F72C7A5B518A99A3B9969D48C5643480E7B0D47BF6115654D734F8D87FA73FA14554BBF3760D72437B6F923A0C5DF72A952E6BE322B70B29CA3D75DEAEFD5BCEA17AC518D409F1B0FB3C9D208045F5C617E1E77C289E2C4732AC2D9F5B5AAC760E3120228292103E385BCF49EA6B58242B070005D8E08ABB3C53CDE4B45E9ED375C69BFA67A3DB20691DD1C71D08D339FC6C0996EA195EBABD39A59B9013EB315BF1A8C90A15664B1F95C56ADB2D5EB5D55EE93A3A0A682B1D654C3EB8A75F7CF36A09FC9C6C3A8179575DA1C3CFE18BA14BE613239FCF7430A4BDADF0B57A06DA3598A8ED73035B572CA2C3A84851B87F522D072D37CEA05C3D607BDCB1AD4A747C1B1D00BB03C085C543D14A5C8EFDDF92B0908B9E74B80CF8EA16D5A3C038FAF0037DB99481E015504E865C91100FE39348007F3041835D045D98ED3D82C8C48360FDFAEC4F4073DF6D4A8AC7824FA1F63B73B326D628A18DC85ED969748DA36F058E4D2BA74AC37DC32C49E83F5F926C112ACBA8C179264BDD59DBFD882029E7967B42FDF0CFCAF5A65DDEAB52B5389EAE45CF998B9C0AEE00F860E00BF630330BC548378E883112C56608582435B4DEE7A0F109FECC4FE630B1B4603C783408FE6244FFDA05A005C42717F86E5B98884438D1526D9E2FB67546061E189C51F68618012F9160538E538E6D4B0787938ADA0377DA445EC1BD6ABA3142EF4AAC221C0F8603225CF50699F2186F982DEEE6B3AB6D95410BCFB6DDB2E9183DEC9AA27415302FCC83BDEA5E81479593CAC5DC0C5651B23383AABE8B7372B323C1C5FD28501E849A7CDEAB75C7564E97D429D0CBEA4E4C5577B48C8E340E234F6C6941FE9160628B826322E9A59A27CD1D811A4DFEDFD218E321884E123DAD414715461574EB0DCFCFEB1A9D562D64BDD68938800A75A92C1AB7A49CC3ADAA298747E611C400DDA74BCC4C0EB91D50B395EBE7760CFC569B6ECCD1699D0236AC36CACA391C00CD87D5EBDB1CEFDA4D87505FFD82606C4223FD49A579DD2CA8D54B4542C516854108D2D17A5AC24F1FC3B0F9DB097C8D23A5E161F1744F9038276C2A646355553353E75A9664D1BDB5200A0F84028816D54A0DD43986FE2EB7D85E92BB749DD60329EFFFDBB7E27DA19AF3A0C55BB0B5635F57816B5751964353CD57714AEB3EB3935C188188A6421FA4FE5C7838FCCC67748C14164EA4F582E533A4EA324747870063A6A70B58EF119F7E4C4BEF0213C53A406911D105EE3931D163E7084154B82E3FA24FF6302CC98EECB03A214BA071D7302266D767FE574A92E30CB4DFB9E6100D4B419CA5639A2EECD94A9001B385D87956003D3EEDA2E8AC0275E2A64ECDC8ADECAE2F41C9A6BF90AE054DDF2F59591725DC67AA64EFEF57972DB267E7FA90550F51215BFC8CD4E533B3E4516F0A3C22214F74E5242265A832B6AB54289AC6546516BFB4CDA5C8D81A4"))


const store = createStore(
    rootReducer,
    applyMiddleware(
        apiMiddleWare,
        thunkMiddleware, // lets us dispatch() functions
        createLogger(), // neat middleware that logs actions
    )
)

const AppWithNavigationState = connect(
    (state) => ({
        nav: state.nav
    })
)((props) => (
    <View style={{flex: 1}}>
        <StatusBar
            backgroundColor="transparent"
            barStyle="light-content"
            translucent={true}
        />
        <AppNavigator navigation={addNavigationHelpers({
            dispatch: props.dispatch,
            state: props.nav,
            style: {flex: 1}
        })}/>
        <Player style={{width: '100%'}} />
        {/*<VideoPlayer style={{width: '100%'}} />*/}
    </View>));

export default class extends React.Component {
    render() {
        return (
            <Provider store={store}>
                <AppWithNavigationState/>
            </Provider>
        );
    }
}